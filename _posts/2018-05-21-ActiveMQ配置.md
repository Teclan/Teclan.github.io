---
layout: post
title: ActiveMQ配置
description: 消息中间件 ActiveMQ 使用记录
categories: 消息中间件
author: teclan
tags: ActiveMQ
---


## ActiveMQ 日志配置

ActiveMQ默认的日志输出等级都是 INFO，生产环境INFO基本上没有问题，但是当我们还不熟悉环境活在
我们程序还不够稳定的时候，更详细的日志是我们排查问题的好帮手，修改 conf/log4j.properties，
可以将以下内容直接替换原来的配置。

```
# 默认的输出到文件的日志配置（等级为INFO）
# log4j.rootLogger=INFO, console, logfile
# 现修改输出到文件的日志等级为 DEBUG
log4j.rootLogger=INFO, console, logfile
log4j.logger.org.apache.activemq.spring=WARN
log4j.logger.org.apache.activemq.web.handler=WARN
log4j.logger.org.springframework=WARN
log4j.logger.org.apache.xbean=WARN
log4j.logger.org.apache.camel=INFO
log4j.logger.org.eclipse.jetty=WARN

# Console appender
log4j.appender.console=org.apache.log4j.ConsoleAppender
log4j.appender.console.layout=org.apache.log4j.PatternLayout
log4j.appender.console.layout.ConversionPattern=%5p | %m%n

# 默认的输出到控制台的日志配置（等级为INFO）
# log4j.appender.console.threshold=INFO
# 现修改输出到文件的日志等级为 DEBUG
log4j.appender.console.threshold=DEBUG

# File appender
log4j.appender.logfile=org.apache.log4j.RollingFileAppender
log4j.appender.logfile.file=${activemq.data}/activemq.log
log4j.appender.logfile.maxFileSize=1024KB
log4j.appender.logfile.maxBackupIndex=5
log4j.appender.logfile.append=true
log4j.appender.logfile.layout=org.apache.log4j.PatternLayout
log4j.appender.logfile.layout.ConversionPattern=%d | %-5p | %m | %c | %t%n

log4j.throwableRenderer=org.apache.log4j.EnhancedThrowableRenderer

###########
# Audit log
###########

log4j.additivity.org.apache.activemq.audit=false
log4j.logger.org.apache.activemq.audit=INFO, audit

log4j.appender.audit=org.apache.log4j.RollingFileAppender
log4j.appender.audit.file=${activemq.data}/audit.log
log4j.appender.audit.maxFileSize=1024KB
log4j.appender.audit.maxBackupIndex=5
log4j.appender.audit.append=true
log4j.appender.audit.layout=org.apache.log4j.PatternLayout
log4j.appender.audit.layout.ConversionPattern=%-5p | %m | %t%n
```
